---
title: "Ulrik Lyngs"
#date: "`r Sys.Date()`"
output:
  pagedown::html_paged:
    # change to true for a self-contained document, but it'll be a litte slower for Pandoc to render
    self_contained: false
    # CDS
    #css: [css/one-column-paged.css, "https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"]
    # offline
    #css: ["css/one-column-paged.css", "https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css"]
    css: ["css/one-column-paged-academic.css",  "fontawesome-free-5.8.1-web/css/all.css"]
    number_sections: false
links-to-footnotes: true
---


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = FALSE)
library(tidyverse)
library(knitr)
library(googlesheets4)
library(lubridate)
gs4_deauth()

#### publications #####
# publications <- read_sheet("https://docs.google.com/spreadsheets/d/1ta71CAGkcLqm-W1UdVRA_JJSddWV2TsrRZsCnQlmOis/edit?usp=sharing",
#            sheet = "publications",
#            col_types = "c")
# publications %>% write_csv("content/publications.csv")
publications <- read_csv("content/publications.csv")

#### cv entries #####
# cv_entries <- read_sheet("https://docs.google.com/spreadsheets/d/1ta71CAGkcLqm-W1UdVRA_JJSddWV2TsrRZsCnQlmOis/edit?usp=sharing",
#            sheet = "cv_entries",
#            col_types = "c") %>%
#   mutate(year_begin = year(date_begin)) %>%
#   mutate(year_end = case_when(
#     date_end == "present" ~ date_end,
#     is.na(date_end) ~ "",
#     TRUE ~ str_sub(date_end, 1, 4)
#   )) 
cv_entries <- read_csv("content/cv_entries.csv")

```

<div class="grid-container"> 
<!-- top row -->
```{block type="col-6 grid-item personal-summary", echo=TRUE}
## Personal summary {.summary}
I am a computer scientist and cognitive psychologist, researching design strategies for supporting self-control over digital device use.
I am passionate about creating practical impact through action research in educational institutions and applying open science methods.
```

```{block type='col-6 grid-item', echo=TRUE}
## Contact information {.box}
<div class="info-box">

| Center | Left |
|:------:|:-----|
| <i class="fas fa-map-marker-alt"></i>|Department of Computer Science,\
University of Oxford, UK|
| <i class="fas fa-envelope"></i> | ulrik.lyngs\@cs.ox.ac.uk |
| <i class="fas fa-globe"></i> | [ulriklyngs.com](https://ulriklyngs.com) |
| <i class="fab fa-github"></i> | [ulyngs](https://github.com/ulyngs) |
 
</div>
```

</div>

<div class="cv-entries">
## Education {.education}
```{r}
cv_entries %>% 
  filter(type == 'education') %>% 
  mutate(what = str_c(what, ", ", where)) %>% 
  mutate(year = str_c(year_begin, " --- ", year_end)) %>% 
  select(year, what) %>% 
  kable()
```

## Awards and honours
```{r}
cv_entries %>% 
  filter(type == 'awards',
         is.na(one_column_paged)) %>% 
  mutate(what = str_c(what, ", ", where)) %>%  
  select(year_begin, what) %>% 
  kable()
```

## Grants
```{r}
cv_entries %>% 
  filter(type == 'grants',
         is.na(one_column_paged)) %>% 
  mutate(additional_info = if_else(is.na(additional_info), "", additional_info)) %>% 
  mutate(what = if_else(!is.na(additional_info),
                        str_c(what, " (", additional_info, "), ", where),
                        str_c(what, ", ", where))) %>% 
  select(year_begin, what) %>% 
  kable()
```

<!-- <br class="pageBreak"> -->

## Publications {.three-split}
<h3>Conference publications <span class="review-note">(fully reviewed, archival)</span></h3>
```{r}
# create helper function for taking one name and replacing the first name with initial and dot
replace_first_name_with_initial_and_dot <- function(author_name) {
  str_replace(author_name, "(?<=\\S)\\S+", "\\.")
}

# create function for doing this for an entry of authors
replace_first_names_in_list_with_initial_and_dot <- function(authors){
  authors_split <- str_split(authors, ",") %>% 
    map(str_trim)
  
  authors_split[[1]] %>% map_chr(replace_first_name_with_initial_and_dot) %>% 
    paste0(collapse = ", ")
}

publications_table <- publications %>%
  filter(type == "conference paper") %>% 
  mutate(authors_full = map_chr(authors_full, replace_first_names_in_list_with_initial_and_dot)) %>% 
  arrange(desc(date)) %>%
  mutate(year = year(date)) %>% 
  mutate(citation = ifelse(!is.na(award), 
                           str_c("<span class='publication-title'>", title, "</span><br><span class='publication-authors'>", authors_full, "</span><br><span class='publication-venue'>", venue_abbrev, ": ", venue, "</span><br><i class='fas fa-award'></i> <span class='publication-award'>", award, "</span>"),
                           str_c("<span class='publication-title'>", title, "</span><br><span class='publication-authors'>", authors_full, "</span><br><span class='publication-venue'>", venue_abbrev, ": ", venue, "</span>"))) %>%
  mutate(citation = str_replace(citation, "U\\. Lyngs", "*U\\. Lyngs*"))  # make my name italic

publications_table %>%
  select(number, year, citation) %>%
  knitr::kable() 
```


```{r, include=FALSE}
publications_table <- publications %>%
  arrange(desc(date), type) %>%
  mutate(author_year = str_c(authors_full, " (", year(date), "). ")) %>%
  #mutate(author_year = str_c("*", authors, " (", year, ")*. ")) %>%  #italicise authors and year
  mutate(title = ifelse(!is.na(url), str_c("[", title, "](", url, ")"), title)) %>% #turn title into link
  #mutate(title = str_c("<span style='text-decoration: underline'>", title, "</span>")) %>% #underline title
  mutate(citation = ifelse(!is.na(award), 
                           str_c(author_year, title, venue, "<i class='fas fa-award'></i><em>", award, "</em>", sep = " "),
                           str_c(author_year, title, venue, sep = " "))) %>%
  mutate(citation = str_replace(citation, "Ulrik Lyngs", "__Ulrik Lyngs__")) # make my name bold

publications_table %>%
  filter(type != "master's thesis") %>% 
  select(type, citation) %>%
  knitr::kable()
```

<!-- <br class="pageBreak"> -->

## Talks {.nohead .talks .set-width}
```{r}
cv_entries %>% 
  filter(type == 'talk') %>% 
  mutate(what = str_c("*", what, "*, ", where)) %>% 
  select(year_begin, what) %>% 
  kable()

```

## Poster presentations {.nohead .posters .set-width}
```{r}
cv_entries %>% 
  filter(type == 'poster') %>%
  mutate(what = str_c("*", what, "*, ", where)) %>% 
  select(year_begin, what) %>% 
  arrange(desc(year_begin)) %>% 
  kable()
```

## Media coverage {.media .nohead .set-width}
```{r}
cv_entries %>% 
  filter(type == 'media') %>%
  select(year_begin, what) %>% 
  kable()
```

<!-- <br class="pageBreak"> -->

## Teaching experience {.teaching .nohead .set-width}
```{r}
cv_entries %>% 
  filter(type == 'teaching') %>% 
  mutate(what = ifelse(!is.na(additional_info), 
    str_c("<span class='work-title'>", what, "</span><br class='work-break'>", where, "<br>", additional_info),
    str_c("<span class='work-title'>", what, "</span><br class='work-break'>", where))) %>% 
  mutate(year = ifelse(!is.na(year_end), str_c(year_begin, " --- ", year_end), year_begin)) %>% 
  select(year, what) %>% 
  kable()
```

## Service {.service .nohead .set-width}
```{r}
cv_entries %>% 
  filter(type == 'service') %>% 
  mutate(year_end = ifelse(year_end == "present", "", year_end)) %>% 
  mutate(where = ifelse(!is.na(url), str_c("[", where, "](", url, ")"), where)) %>% 
  mutate(what = str_c(what, ", ", where)) %>%
  mutate(year = ifelse(!(year_end == year_begin), 
                       str_c(year_begin, " --- ", year_end), 
                       year_begin)) %>% 
  select(year, what) %>% 
  kable()
```

## Selected work experience {.work .nohead .vertical-top .set-width}
```{r}
cv_entries %>% 
  filter(type == 'work', is.na(one_column_paged)) %>% 
  mutate(additional_info = replace_na(additional_info, "")) %>% 
  mutate(what = str_c("<span class='work-title'>", what, "</span><br class='work-break'>", where, "<br>", additional_info)) %>% 
  mutate(year = ifelse(!is.na(year_end), str_c(year_begin, " --- ", year_end), year_begin)) %>% 
  select(year, what) %>% 
  kable()
```


## Professional development {.prof-dev .nohead .set-width}
```{r}
cv_entries %>% 
  filter(type == 'prof-dev') %>% 
  mutate(what = str_c(what, ", ", where)) %>% 
  select(year_begin, what) %>% 
  kable()
```

## Technical skills {.technical .nohead .set-width}
```{r}
cv_entries %>% 
  filter(type == 'technical') %>% 
  mutate(icon = case_when(
    str_detect(what, "data analysis") ~ "fa-bar-chart",
    str_detect(what, "research") ~ "fa-flask",
    str_detect(what, "Web") ~ "fa-laptop"
  )) %>% 
  mutate(icon = str_c("<i class='fa fa-lg ", icon, "'></i>")) %>% 
  mutate(what = str_c(what, " ", additional_info)) %>% 
  select(icon, what) %>% 
  kable()
```

## Software development {.nohead .vertical-top .set-width}
```{r}
cv_entries %>% 
  filter(type == 'programming') %>% 
  replace_na(list(where = "", additional_info = "")) %>% 
  mutate(what = str_c(what, ", ", where, "<br>", additional_info)) %>% 
  select(year_begin, what) %>% 
  arrange(desc(year_begin)) %>% 
  kable(align = c('l', 'l'))
```

<!-- <br class="pageBreak"> -->

## Personal skills & volunteering {.personal .nohead .set-width}
```{r}
cv_entries %>%
  filter(type == 'volunteering' & professional_2_page == 'y') %>%
  mutate(what = str_c("<span class='work-title'>", what, "</span><br class='work-break'>", where)) %>%
  mutate(what = ifelse(!is.na(additional_info), str_c(what, "<br>", additional_info), what)) %>%
  mutate(year = ifelse(!is.na(year_end), 
                       str_c(year_begin, " --- ", year_end), 
                       year_begin)) %>%
  arrange(order, desc(year_end), desc(year)) %>%
  select(year, what) %>%
  kable()
```

<!-- <br class="pageBreak"> -->

</div>
### Links
